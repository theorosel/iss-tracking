function App(e){this.$el={},this.$el.container=e,this.$el.altitude=this.$el.container.querySelector(".altitude"),this.$el.speed=this.$el.container.querySelector(".speed"),this.$el.city_over=this.$el.container.querySelector(".city"),this.$el.feed_link=this.$el.container.querySelector(".link-feed"),this.$el.team_link=this.$el.container.querySelector(".link-team"),this.$el.earth=this.$el.container.querySelector("#earth"),this.$el.markers=null,this.options={atmosphere:!1,center:[0,0],zoom:2.5,zooming:!1,unconstrainedRotation:!0},this.earth=new WE.map("earth",this.options),this.path=[],this.ship_path=[],this.markers=[],console.log(this.markers);var t=this;this.$el.feed_link.addEventListener("click",function(e){t.toggle_feed()}),this.$el.team_link.addEventListener("click",function(e){t.toggle_team()}),this.init=function(){this.add_mark(-50,-50),this.add_mark(-30,-30);for(var e=0;e<this.markers.length;e++)console.log(this.markers[e]),$popup=document.createElement("div"),$popup.classList.add("marker-popup"),this.markers[e].element.appendChild($popup),this.markers[e].element.addEventListener("mouseover",function(){this.lastChild.style.opacity=1,this.lastChild.style.transform="scale(1)"}),this.markers[e].element.addEventListener("mouseleave",function(){this.lastChild.style.opacity=0,this.lastChild.style.transform="scale(0)"});console.log(this.markers)},this.get_latest_tweets=function(){},this.initialize=function(){WE.tileLayer("http://tileserver.maptiler.com/nasa/{z}/{x}/{y}.jpg",{minZoom:0,maxZoom:300,zooming:!1,attribution:"NASA"}).addTo(this.earth)},this.get_iss_data=function(){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=JSON.parse(this.responseText).altitude,i=JSON.parse(this.responseText).latitude,s=JSON.parse(this.responseText).longitude,a=JSON.parse(this.responseText).velocity;t.draw_travel(i,s),t.get_city_overflown(i,s),t.update_speed(a),t.update_altitude(e),t.move_iss(i,s)}},e.open("GET","https://api.wheretheiss.at/v1/satellites/25544&units=miles",!0),e.send()},this.get_city_overflown=function(e,i){var s=new XMLHttpRequest;s.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=JSON.parse(this.responseText).timezone_id,i=e.split("/"),e=i[0]+" - "+i[1];t.$el.city_over.innerText="",t.$el.city_over.innerText=e}else if(4==this.readyState&&200!=this.status){var e="Ocean";t.$el.city_over.innerText="",t.$el.city_over.innerText=e}},s.open("GET","https://api.wheretheiss.at/v1/coordinates/"+e+","+i,!0),s.send()},this.draw_travel=function(e,t){var i=WE.marker([e,t]).addTo(this.earth);$path=i.element.firstChild,$path.classList.remove("we-pm-icon"),$path.removeAttribute("style"),$path.classList.add("we-pm-icon-path"),this.path.length<=150?this.path.push($path):(this.path[0].remove(),this.path.shift(),this.path.push($path))},this.move_iss=function(e,t){var i=WE.marker([e,t]).addTo(this.earth);$ship=i.element.firstChild,$ship.classList.remove("we-pm-icon"),$ship.removeAttribute("style"),$ship.classList.add("we-pm-icon-ship"),this.ship_path.length<=1?this.ship_path.push($ship):(this.ship_path[0].remove(),this.ship_path.shift(),this.ship_path.push($ship))},this.add_mark=function(e,i){var s=WE.marker([e,i]).addTo(this.earth);$marker=s.element.firstChild,$marker.classList.remove("we-pm-icon"),$marker.removeAttribute("style"),$marker.classList.add("we-pm-icon-marker"),t.markers.push(s)},this.update_speed=function(e){e=e.toString(),e=e.substring(0,8),this.$el.speed.innerText="",this.$el.speed.innerText=e+" km/h"},this.update_altitude=function(e){console.log(e),e=e.toString(),e=e.substring(0,6),this.$el.altitude.innerText="",this.$el.altitude.innerText=e+" kilometers"},this.toggle_feed=function(){this.$el.feed_link.classList.toggle("active"),this.$el.container.classList.toggle("feed-mode"),this.$el.team_link.classList.remove("active"),this.$el.container.classList.remove("team-mode")},this.toggle_team=function(){this.$el.team_link.classList.toggle("active"),this.$el.container.classList.toggle("team-mode"),this.$el.feed_link.classList.remove("active"),this.$el.container.classList.remove("feed-mode")}}var earth=new App(document.querySelector(".app"));document.addEventListener("DOMContentLoaded",function(e){earth.init(),earth.initialize(),e.preventDefault(e)});